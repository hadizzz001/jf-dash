(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6266:function(e,t,l){Promise.resolve().then(l.bind(l,8758))},8758:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return s}});var a=l(3955),r=l(2310);function s(){let[e,t]=(0,r.useState)([]),[l,s]=(0,r.useState)([]),[o,i]=(0,r.useState)(null),[n,d]=(0,r.useState)(""),[u,h]=(0,r.useState)("");(0,r.useEffect)(()=>{m(),p()},[]);let m=async()=>{let e=await fetch("/api/products");if(e.ok){let l=await e.json();t(l)}else console.error("Failed to fetch products")},p=async()=>{let e=await fetch("/api/category");if(e.ok){let t=await e.json();s(t)}else console.error("Failed to fetch categories")},x=async e=>{if(confirm("Are you sure you want to delete this product?"))try{let t=await fetch("/api/products/".concat(e),{method:"DELETE"});t.ok?(alert("Product deleted successfully"),m()):console.error("Failed to delete product")}catch(e){console.error("Error:",e)}},b=e=>{i(e)},f=async e=>{try{let t=await fetch("/api/products/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok?(alert("Product updated successfully"),i(null),m()):console.error("Failed to update product")}catch(e){console.error("Error:",e)}},g=e=>e.title.toLowerCase().includes(n.toLowerCase()),j=e=>{let t=!u||e.category===u;return console.log("Filtering product: ".concat(e.title," | Category: ").concat(e.category," | Selected Category: ").concat(u," | Show: ").concat(t)),t},y=e.filter(e=>g(e)&&j(e));return(0,r.useEffect)(()=>{console.log("Filtered products:",y)},[y]),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-4",children:[o&&(0,a.jsx)(c,{product:o,onCancel:()=>i(null),onSave:f}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Product List"}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("input",{type:"text",value:n,onChange:e=>d(e.target.value),className:"w-full border p-2",placeholder:"Search by title..."})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full border p-2",children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),l.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.id))]})}),(0,a.jsxs)("table",{className:"table-auto w-full border-collapse border border-gray-200 mb-4",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"border p-2",children:"Title"}),(0,a.jsx)("th",{className:"border p-2",children:"Pic"}),(0,a.jsx)("th",{className:"border p-2",children:"Price (USD)"}),(0,a.jsx)("th",{className:"border p-2",children:"Stock"}),(0,a.jsx)("th",{className:"border p-2",children:"Category"}),(0,a.jsx)("th",{className:"border p-2",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:y.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"border p-2",children:e.title}),(0,a.jsx)("td",{className:"border p-2",children:(0,a.jsx)("img",{src:e.img[0],alt:"Product Image",className:"w-24 h-auto"})}),(0,a.jsx)("td",{className:"border p-2",children:e.price}),(0,a.jsx)("td",{className:"border p-2",children:e.stock}),(0,a.jsx)("td",{className:"border p-2",children:e.category}),(0,a.jsxs)("td",{className:"border p-2",children:[(0,a.jsx)("button",{onClick:()=>b(e),className:"bg-yellow-500 text-white px-2 py-1 mr-2",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>x(e.id),className:"bg-red-500 text-white px-2 py-1",children:"Delete"})]})]},e.id))})]})]})}function c(e){let{product:t,onCancel:l,onSave:s}=e,[c,o]=(0,r.useState)(t.title),[i,n]=(0,r.useState)(t.price),[d,u]=(0,r.useState)(t.stock),[h,m]=(0,r.useState)(t.weight||""),[p,x]=(0,r.useState)(t.shipping||""),[b,f]=(0,r.useState)(t.sku||""),[g,j]=(0,r.useState)(t.videoLink||"");return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s({...t,title:c,price:i,stock:d,weight:h,shipping:p,sku:b,videoLink:g})},className:"border p-4 bg-gray-100 rounded",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Product"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,a.jsx)("input",{id:"title",type:"text",value:c,onChange:e=>o(e.target.value),className:"w-full border p-2",placeholder:"Title",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price"}),(0,a.jsx)("input",{id:"price",type:"text",value:i,onChange:e=>n(e.target.value),className:"w-full border p-2",placeholder:"Price",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700",children:"Stock"}),(0,a.jsx)("input",{id:"stock",type:"text",value:d,onChange:e=>u(e.target.value),className:"w-full border p-2",placeholder:"Stock",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700",children:"Weight"}),(0,a.jsx)("input",{id:"weight",type:"text",value:h,onChange:e=>m(e.target.value),className:"w-full border p-2",placeholder:"Weight"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"shipping",className:"block text-sm font-medium text-gray-700",children:"Shipping Info"}),(0,a.jsx)("input",{id:"shipping",type:"text",value:p,onChange:e=>x(e.target.value),className:"w-full border p-2",placeholder:"Shipping Info"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700",children:"SKU"}),(0,a.jsx)("input",{id:"sku",type:"text",value:b,onChange:e=>f(e.target.value),className:"w-full border p-2",placeholder:"SKU"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"videoLink",className:"block text-sm font-medium text-gray-700",children:"Video Link"}),(0,a.jsx)("input",{id:"videoLink",type:"text",value:g,onChange:e=>j(e.target.value),className:"w-full border p-2",placeholder:"Video Link"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2",children:"Save"}),(0,a.jsx)("button",{type:"button",onClick:l,className:"bg-gray-500 text-white px-4 py-2",children:"Cancel"})]})]})}},3009:function(e,t,l){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=l(2310),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function n(e,t,l){var a,s={},n=null,d=null;for(a in void 0!==l&&(n=""+l),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(d=t.ref),t)c.call(t,a)&&!i.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===s[a]&&(s[a]=t[a]);return{$$typeof:r,type:e,key:n,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=n,t.jsxs=n},3955:function(e,t,l){"use strict";e.exports=l(3009)}},function(e){e.O(0,[704,801,744],function(){return e(e.s=6266)}),_N_E=e.O()}]);