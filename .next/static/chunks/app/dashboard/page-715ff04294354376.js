(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6266:function(e,t,l){Promise.resolve().then(l.bind(l,8758))},8515:function(e,t,l){"use strict";var a=l(3955),s=l(2312),r=l(5852),n=l(2310);t.Z=e=>{let{defaultValue:t,HandleImagesChange:l}=e,[c,o]=(0,n.useState)(!0),[i,d]=(0,n.useState)([]);return(0,a.jsx)(s.Z,{sx:{pt:"1.5em"},children:c&&(0,a.jsx)(r.W,{clearable:!0,multiple:!0,imagesOnly:!0,onChange:()=>{l(i)},onFileSelect:async e=>{let t=e&&e.files();if(!t)return;let l=[];for(let e=0;e<t.length;e++)t[e].done(e=>{(null==e?void 0:e.cdnUrl)&&l.push("".concat(e.cdnUrl))});d(l)},publicKey:"998cbc4a64cbfa34b932"})})}},8758:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return i}});var a=l(3955),s=l(2310),r=l(8515),n=l(1213),c=l.n(n);l(3208);let o=c()(()=>Promise.all([l.e(585),l.e(669),l.e(922)]).then(l.t.bind(l,922,23)),{loadableGenerated:{webpack:()=>[922]},ssr:!1});function i(){let[e,t]=(0,s.useState)([]),[l,r]=(0,s.useState)([]),[n,c]=(0,s.useState)(null),[o,i]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[p,h]=(0,s.useState)([""]);(0,s.useEffect)(()=>{f(),x()},[]);let f=async()=>{let e=await fetch("/api/products");if(e.ok){let l=await e.json();t(l)}else console.error("Failed to fetch products")},x=async()=>{let e=await fetch("/api/category");if(e.ok){let t=await e.json();r(t)}else console.error("Failed to fetch categories")},b=async e=>{if(confirm("Are you sure you want to delete this product?"))try{let t=await fetch("/api/products/".concat(e),{method:"DELETE"});t.ok?(alert("Product deleted successfully"),f()):console.error("Failed to delete product")}catch(e){console.error("Error:",e)}},g=e=>{c(e)},j=async e=>{try{let t=await fetch("/api/products/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok?(alert("Product updated successfully"),c(null),f()):console.error("Failed to update product")}catch(e){console.error("Error:",e)}},y=e=>e.title.toLowerCase().includes(o.toLowerCase()),N=e=>{let t=!u||e.category===u;return console.log("Filtering product: ".concat(e.title," | Category: ").concat(e.category," | Selected Category: ").concat(u," | Show: ").concat(t)),t},v=e.filter(e=>y(e)&&N(e));return(0,s.useEffect)(()=>{console.log("Filtered products:",v)},[v]),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-4",children:[n&&(0,a.jsx)(d,{product:n,onCancel:()=>c(null),onSave:j}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Product List"}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),className:"w-full border p-2",placeholder:"Search by title..."})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full border p-2",children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),l.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.id))]})}),(0,a.jsxs)("table",{className:"table-auto w-full border-collapse border border-gray-200 mb-4",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"border p-2",children:"Title"}),(0,a.jsx)("th",{className:"border p-2",children:"Pic"}),(0,a.jsx)("th",{className:"border p-2",children:"Price (USD)"}),(0,a.jsx)("th",{className:"border p-2",children:"Stock"}),(0,a.jsx)("th",{className:"border p-2",children:"Category"}),(0,a.jsx)("th",{className:"border p-2",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:v.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"border p-2",children:e.title}),(0,a.jsx)("td",{className:"border p-2",children:(0,a.jsx)("img",{src:"api/proxy?url=".concat(e.img[0]),alt:"Product Image",className:"w-24 h-auto"})}),(0,a.jsx)("td",{className:"border p-2",children:e.price}),(0,a.jsx)("td",{className:"border p-2",children:e.stock}),(0,a.jsx)("td",{className:"border p-2",children:e.category}),(0,a.jsxs)("td",{className:"border p-2",children:[(0,a.jsx)("button",{onClick:()=>g(e),className:"bg-yellow-500 text-white px-2 py-1 mr-2",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>b(e.id),className:"bg-red-500 text-white px-2 py-1",children:"Delete"})]})]},e.id))})]})]})}function d(e){let{product:t,onCancel:l,onSave:n}=e,[c,i]=(0,s.useState)(t.title),[d,u]=(0,s.useState)(t.price),[m,p]=(0,s.useState)(t.stock),[h,f]=(0,s.useState)(t.weight||""),[x,b]=(0,s.useState)(t.shipping||""),[g,j]=(0,s.useState)(t.sku||""),[y,N]=(0,s.useState)(t.videoLink||""),[v,S]=(0,s.useState)(t.img||[]),[k,w]=(0,s.useState)(t.description||""),[C,_]=(0,s.useState)(t.specifications||"");return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n({...t,title:c,price:d,stock:m,weight:h,shipping:x,sku:g,videoLink:y,img:v,description:k,specifications:C})},className:"border p-4 bg-gray-100 rounded",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Product"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,a.jsx)("input",{id:"title",type:"text",value:c,onChange:e=>i(e.target.value),className:"w-full border p-2",placeholder:"Title",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price"}),(0,a.jsx)("input",{id:"price",type:"text",value:d,onChange:e=>u(e.target.value),className:"w-full border p-2",placeholder:"Price",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700",children:"Stock"}),(0,a.jsx)("input",{id:"stock",type:"text",value:m,onChange:e=>p(e.target.value),className:"w-full border p-2",placeholder:"Stock",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700",children:"Weight"}),(0,a.jsx)("input",{id:"weight",type:"text",value:h,onChange:e=>f(e.target.value),className:"w-full border p-2",placeholder:"Weight"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"shipping",className:"block text-sm font-medium text-gray-700",children:"Shipping Info"}),(0,a.jsx)("input",{id:"shipping",type:"text",value:x,onChange:e=>b(e.target.value),className:"w-full border p-2",placeholder:"Shipping Info"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700",children:"SKU"}),(0,a.jsx)("input",{id:"sku",type:"text",value:g,onChange:e=>j(e.target.value),className:"w-full border p-2",placeholder:"SKU"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"videoLink",className:"block text-sm font-medium text-gray-700",children:"Video Link"}),(0,a.jsx)("input",{id:"videoLink",type:"text",value:y,onChange:e=>N(e.target.value),className:"w-full border p-2",placeholder:"Video Link"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)(o,{value:k,onChange:w,className:"w-full border p-2",placeholder:"Product description"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"specifications",className:"block text-sm font-medium text-gray-700",children:"Specifications"}),(0,a.jsx)(o,{value:C,onChange:_,className:"w-full border p-2",placeholder:"Product specifications"})]}),(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n  .uploadcare--widget {\n    background:black;\n  }\n  "}}),(0,a.jsx)(r.Z,{defaultValue:v,HandleImagesChange:e=>{e&&S(e)}}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2",children:"Save"}),(0,a.jsx)("button",{type:"button",onClick:l,className:"bg-gray-500 text-white px-4 py-2",children:"Cancel"})]})]})}},1213:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let a=l(6927);l(2310);let s=a._(l(1354));function r(e){return{default:(null==e?void 0:e.default)||e}}function n(e,t){let l=s.default,a={loading:e=>{let{error:t,isLoading:l,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e),Object.assign(a,t);let n=a.loader;return l({...a,loader:()=>null!=n?n().then(r):Promise.resolve(r(()=>null))})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3238:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}(t,{suspense:function(){return s},NoSSR:function(){return r}}),l(6927),l(2310);let a=l(5978);function s(){let e=Error(a.NEXT_DYNAMIC_NO_SSR_CODE);throw e.digest=a.NEXT_DYNAMIC_NO_SSR_CODE,e}function r(e){let{children:t}=e;return t}},1354:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let a=l(6927),s=a._(l(2310)),r=l(3238),n=function(e){let t=Object.assign({loader:null,loading:null,ssr:!0},e);function l(e){let l=t.loading,a=s.default.createElement(l,{isLoading:!0,pastDelay:!0,error:null}),n=t.ssr?s.default.Fragment:r.NoSSR,c=t.lazy;return s.default.createElement(s.default.Suspense,{fallback:a},s.default.createElement(n,null,s.default.createElement(c,e)))}return t.lazy=s.default.lazy(t.loader),l.displayName="LoadableComponent",l}},3208:function(){}},function(e){e.O(0,[722,560,704,801,744],function(){return e(e.s=6266)}),_N_E=e.O()}]);