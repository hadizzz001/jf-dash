(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[732],{67:function(){},2061:function(){},2627:function(e,t,r){Promise.resolve().then(r.bind(r,9648))},9648:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});var l=r(3955),s=r(2310),o=r(9219),a=r(9985),i=r(3118);function n(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)([]),[c,d]=(0,s.useState)(0),x=(0,s.useRef)();(0,s.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/products",{method:"GET"}),r=await e.json();t(r)};e()},[]),(0,s.useEffect)(()=>{let e=r.reduce((e,t)=>e+(Number(t.price)||0)*t.qty,0);d(e)},[r]);let p=(t,l,s)=>{let o=[...r];if("title"===l){let r=e.find(e=>e.title===s);o[t].price=(null==r?void 0:r.price)||0}o[t][l]=s,n(o)},u=()=>{let e=new Date;return e.toLocaleDateString()};return(0,l.jsxs)("div",{className:"p-5",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Create Quotation"}),(0,l.jsx)("button",{onClick:()=>{n([...r,{title:"",price:0,qty:1}])},className:"bg-blue-500 text-white px-4 py-2 mb-4 rounded",children:"Add Item"}),(0,l.jsxs)("div",{ref:x,className:"border p-4",children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("img",{src:"logo1.png",alt:"Logo",className:"max-w-[200px]"})}),(0,l.jsxs)("div",{className:"text-right text-sm font-light mb-4",children:["Date: ",u()]}),(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Quotation"}),(0,l.jsxs)("table",{className:"table-auto w-full border-collapse border border-gray-300 mb-4",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Title"}),(0,l.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Price"}),(0,l.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Qty"}),(0,l.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Total"})]})}),(0,l.jsx)("tbody",{children:r.map((t,r)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,l.jsxs)("select",{value:t.title,onChange:e=>p(r,"title",e.target.value),className:"w-full border-none p-1 outline-none",style:{height:"40px"},children:[(0,l.jsx)("option",{value:"",children:"Select Product"}),e.map(e=>(0,l.jsx)("option",{value:e.title,children:e.title},e.id))]})}),(0,l.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:[(Number(t.price)||0).toFixed(2)," "]}),(0,l.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,l.jsx)("input",{type:"number",value:t.qty,onChange:e=>p(r,"qty",parseInt(e.target.value)),className:"w-full border-none p-1 outline-none"})}),(0,l.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:[((Number(t.price)||0)*t.qty).toFixed(2)," "]})]},r))})]}),(0,l.jsxs)("div",{className:"text-right font-bold",children:["Subtotal: ",c.toFixed(2)]})]}),(0,l.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,l.jsx)("button",{onClick:()=>{let e=new i.kH;x.current,e.addImage("logo1.png","PNG",10,10,50,30),e.setFontSize(12),e.text("Date: "+u(),160,20),e.setFontSize(18),e.text("Quotation",14,40),e.setFontSize(12),e.text("Title",14,60),e.text("Price",70,60),e.text("Qty",120,60),e.text("Total",150,60);let t=70;r.forEach(r=>{e.text(r.title,14,t),e.text((Number(r.price)||0).toFixed(2),70,t),e.text(r.qty.toString(),120,t),e.text(((Number(r.price)||0)*r.qty).toFixed(2),150,t),t+=10}),e.setFontSize(14),e.text("Subtotal: "+c.toFixed(2),160,t+10),e.save("quotation.pdf")},className:"bg-green-500 text-white px-4 py-2 rounded",children:"Export as PDF"}),(0,l.jsx)("button",{onClick:()=>{let e=o.P6.json_to_sheet(r.map(e=>({Title:e.title,Price:(Number(e.price)||0).toFixed(2),Qty:e.qty,Total:((Number(e.price)||0)*e.qty).toFixed(2)}))),t=o.P6.book_new();o.P6.book_append_sheet(t,e,"Quotation");let l=o.cW(t,{bookType:"xlsx",type:"array"}),s=new Blob([l],{type:"application/octet-stream"});(0,a.saveAs)(s,"quotation.xlsx")},className:"bg-yellow-500 text-white px-4 py-2 rounded",children:"Export as Excel"})]})]})}}},function(e){e.O(0,[87,546,553,704,801,744],function(){return e(e.s=2627)}),_N_E=e.O()}]);